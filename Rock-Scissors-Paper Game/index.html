<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ</title>
  <style>
    @font-face {
      font-family: 'Nian';
      src: url('Nian-Black.ttf') format('truetype');
    }

    body {
      font-family: 'Nian', sans-serif;
      background: linear-gradient(135deg, #1e1f3b, #3a2b74);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      text-align: center;
      color: #f3f3f3;
      overflow: hidden;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 1rem;
      color: #ffffff;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .mode-btn {
      padding: 12px 25px;
      margin: 8px;
      border: none;
      border-radius: 15px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      color: #fff;
    }

    .mode-btn:hover {
      transform: scale(1.08);
      box-shadow: 0 0 15px rgba(255,255,255,0.25);
    }

    .easy { background-color: #34a853; }
    .medium { background-color: #fbbc05; }
    .hard { background-color: #ea4335; }

    .game-container { display: none; }

    .icon-btn {
      background: none;
      border: none;
      margin: 0 15px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .icon-btn img {
      width: 90px;
      height: 90px;
      transition: transform 0.2s, filter 0.2s;
    }

    .icon-btn:hover img {
      transform: scale(1.1);
    }

    .icon-btn.selected img {
      transform: scale(1.15);
      filter: drop-shadow(0 0 10px #4ef3ff);
    }

    .countdown {
      font-size: 2rem;
      margin: 20px 0;
      color: #fff;
    }

    .emoji-container {
      position: relative;
      width: 100%;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 80px;
    }

    .emoji-container img {
      width: 100px;
      height: 100px;
      opacity: 0;
      transition: opacity 0.8s;
    }

    .result {
      font-size: 1.8rem;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.8s;
      color: #fff;
    }

    .score {
      margin-top: 15px;
      font-size: 1.2rem;
      color: #fff;
    }

    .mode-message {
      opacity: 0;
      transition: opacity 0.6s ease;
      margin-top: 15px;
      font-size: 1.2rem;
      text-align: center;
      color: #e5e5e5;
    }

    .mode-message.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ® Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯ØŒ Ú©Ø§ØºØ°ØŒ Ù‚ÛŒÚ†ÛŒ</h1>

  <div id="welcome">
    <p>ÛŒÚ©ÛŒ Ø§Ø² Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:</p>
    <button class="mode-btn easy" onclick="startGame('Easy')">Easy </button>
    <button class="mode-btn medium" onclick="startGame('Medium')">Medium </button>
    <button class="mode-btn hard" onclick="startGame('Hard')">Hard </button>
  </div>

  <div id="mode-message" class="mode-message"></div>

  <div id="game" class="game-container">
    <div class="countdown" id="countdown"></div>

    <div class="emoji-container" id="emojis"></div>

    <div id="result" class="result"></div>

    <div>
      <button class="icon-btn" onclick="selectChoice('rock')">
        <img src="rock.png" alt="Ø³Ù†Ú¯">
      </button>
      <button class="icon-btn" onclick="selectChoice('paper')">
        <img src="paper.png" alt="Ú©Ø§ØºØ°">
      </button>
      <button class="icon-btn" onclick="selectChoice('scissors')">
        <img src="scissors.png" alt="Ù‚ÛŒÚ†ÛŒ">
      </button>
    </div>

    <div id="score" class="score">Ø§Ù…ØªÛŒØ§Ø² â†’ ØªÙˆ: 0 | Ø¨Ø§Øª: 0</div>
  </div>

  <script>
    let options = ["rock", "paper", "scissors"];
    let userChoice = "", botChoice = "";
    let score = { user: 0, bot: 0 };
    let countdownInterval;
    let mode = "Easy";
    let history = { rock: 0, paper: 0, scissors: 0 };

    function startGame(selectedMode) {
      mode = selectedMode;
      document.getElementById("welcome").style.display = "none";
      document.getElementById("game").style.display = "block";

      const message = document.getElementById("mode-message");
      let text = "";
      if (mode === "Easy") text = "ðŸ˜Ž Ø¢Ø³Ø§Ù† Ú¯Ø±ÙØªÛŒØŸ Ø¨Ø¨ÛŒÙ† Ø´Ø§Ù†Ø³ Ø¨Ø§ ØªÙˆØ¦Ù‡ ÛŒØ§ Ù†Ù‡!";
      else if (mode === "Medium") text = "âš™ï¸ Ù…ØªØ¹Ø§Ø¯Ù„ Ùˆ Ù…Ù†ØµÙØ§Ù†Ù‡! Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ… ðŸ¤œðŸ¤›";
      else if (mode === "Hard") text = "ðŸ’€ Ø­ÙˆØ§Ø³ØªÙˆ Ø¬Ù…Ø¹ Ú©Ù†... Ù…Ù† Ø¯Ø§Ø±Ù… Ø°Ù‡Ù†ØªÙˆ Ù…ÛŒâ€ŒØ®ÙˆÙ†Ù… ðŸ˜ˆ";

      message.innerText = text;
      message.classList.add("show");
      setTimeout(() => message.classList.remove("show"), 2500);
      startRound();
    }

    function selectChoice(choice) {
      userChoice = choice;
      history[choice]++;
      document.querySelectorAll(".icon-btn").forEach(btn => btn.classList.remove("selected"));
      event.target.closest("button").classList.add("selected");
    }

    function botEasy() {
      return options[Math.floor(Math.random() * 3)];
    }

    function botMedium() {
      let random = Math.random();
      if (random < 0.4) return userChoice;
      if (random < 0.8) return loseTo(userChoice);
      return winAgainst(userChoice);
    }

    function botHard() {
      let mostUsed = Object.entries(history).sort((a, b) => b[1] - a[1])[0][0];
      if (Math.random() < 0.8) {
        return winAgainst(mostUsed);
      } else {
        return botEasy();
      }
    }

    function winAgainst(choice) {
      if (choice === "rock") return "paper";
      if (choice === "paper") return "scissors";
      if (choice === "scissors") return "rock";
    }

    function loseTo(choice) {
      if (choice === "rock") return "scissors";
      if (choice === "paper") return "rock";
      if (choice === "scissors") return "paper";
    }

    function startRound() {
      userChoice = "";
      botChoice = "";
      document.getElementById("emojis").innerHTML = "";
      document.getElementById("result").innerText = "";
      document.getElementById("countdown").innerText = "";

      let count = 3;
      document.getElementById("countdown").innerText = count;
      countdownInterval = setInterval(() => {
        count--;
        document.getElementById("countdown").innerText = count > 0 ? count : "";
        if (count === 0) {
          clearInterval(countdownInterval);
          if (!userChoice) userChoice = options[Math.floor(Math.random() * 3)];
          executeRound();
        }
      }, 1000);
    }

    function executeRound() {
      if (mode === "Easy") botChoice = botEasy();
      else if (mode === "Medium") botChoice = botMedium();
      else botChoice = botHard();

      let winner = "";
      if (userChoice === botChoice) { winner = "âš–ï¸ Ù…Ø³Ø§ÙˆÛŒ!"; }
      else if (
        (userChoice === "rock" && botChoice === "scissors") ||
        (userChoice === "scissors" && botChoice === "paper") ||
        (userChoice === "paper" && botChoice === "rock")
      ) {
        winner = "ðŸŽ‰ ØªÙˆ Ø¨Ø±Ø¯ÛŒ!";
        score.user++;
      } else {
        winner = "ðŸ’» Ø¨Ø§Øª Ø¨Ø±Ø¯!";
        score.bot++;
      }

      const emojisDiv = document.getElementById("emojis");
      const userImg = document.createElement("img");
      const botImg = document.createElement("img");
      userImg.src = `${userChoice}.png`;
      botImg.src = `${botChoice}.png`;

      emojisDiv.appendChild(userImg);
      emojisDiv.appendChild(botImg);

      setTimeout(() => {
        userImg.style.opacity = "1";
        botImg.style.opacity = "1";
        document.getElementById("result").innerText = winner;
        document.getElementById("result").style.opacity = "1";
        document.getElementById("score").innerText = `Ø§Ù…ØªÛŒØ§Ø² â†’ ØªÙˆ: ${score.user} | Ø¨Ø§Øª: ${score.bot}`;
      }, 100);

      setTimeout(() => {
        userImg.style.opacity = "0";
        botImg.style.opacity = "0";
        document.getElementById("result").style.opacity = "0";
        setTimeout(() => {
          emojisDiv.innerHTML = "";
          document.getElementById("result").innerText = "";
          startRound();
        }, 700);
      }, 2500);
    }
  </script>
</body>
</html>
